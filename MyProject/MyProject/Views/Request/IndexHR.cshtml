@model IEnumerable<MyProject.Models.Request>

@{
    ViewBag.Title = "Index";
}

<link href="@Url.Content("~/Content/themes/base/minified/jquery-ui.min.css")" rel="stylesheet" type="text/css" />

<link href="~/Content/style.css" rel="stylesheet" type="text/css" media="all" />
<script type="text/javascript" src="~/Scripts/jquery-1.3.2.min.js"> </script>
<script type="text/javascript" src="~/Scripts/script.js"></script>

<script src="@Url.Content("~/Scripts/jquery-1.8.2.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery-ui-1.8.24.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script>

<script type="text/javascript">
    $(document).ready(function () {
        $(".editDialog").live("click", function (e) {
            var url = $(this).attr('href');
            $("#dialog-edit").dialog({
                title: 'Edit Request Detail',
                autoOpen: false,
                resizable: false,
                height: 455,
                width: 550,
                show: { effect: 'drop', direction: "up" },
                modal: true,
                draggable: true,
                open: function (event, ui) {
                    $(this).load(url);

                },
                close: function (event, ui) {
                    $(this).dialog('close');
                }
            });

            $("#dialog-edit").dialog('open');
            return false;
        });

        $(".viewDialog").live("click", function (e) {
            var url = $(this).attr('href');
            $("#dialog-view").dialog({
                title: 'Employee Detail',

                autoOpen: false,
                resizable: false,
                height: 350,
                width: 400,
                show: { effect: 'drop', direction: "up" },
                modal: true,
                draggable: true,
                open: function (event, ui) {
                    $(this).load(url);

                },
                buttons: {
                    "Close": function () {
                        $(this).dialog("close");

                    }
                },
                close: function (event, ui) {
                    $(this).dialog('close');
                }
            });

            $("#dialog-view").dialog('open');
            return false;
        });

        $("#btncancel").live("click", function (e) {
            $("#dialog-edit").dialog('close');

        });
    });
</script>

<h2>Index</h2>

<table class="table">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.Applicant.FullName)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Delegation.DelegationType)
        </th>
        <th>
            Status
        </th>
        <th>
            @Html.DisplayNameFor(model => model.DepartureDate)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.ReturnDate)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Description)
        </th>
        <th></th>
    </tr>

@foreach (var item in Model) {
    <tr>
        <td>
            @Html.DisplayFor(model => item.Applicant.FullName)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Delegation.DelegationType)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Status.StatusName)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.DepartureDate)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.ReturnDate)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Description)
        </td>
        <td>
            @Html.ActionLink("Edit", "EditHR", new { id = item.RequestId }, new { @class = "editDialog"}) |
            <a href="#" class="topopup">Details</a>
            <div id="toPopup">
                <div class="close"></div>
                <span class="ecs_tooltip">Press Esc to close <span class="arrow"></span></span>
                <div id="popup_content">
                    <!--{Html.RenderPartial("../Request/_Details");}-->
                    <div>
                        @using (@Html.BeginForm())
                        {
                            <h2>Request Details</h2>
                            <fieldset>
                                <table>
                                    <tr>
                                        <td><b>Applicant</b></td>
                                        <td>@Html.DisplayFor(model => item.Applicant.FullName)</td>
                                    </tr>
                                    <tr>
                                        <td><b>@Html.DisplayNameFor(model => model.Delegation.DelegationType)</b></td>
                                        <td>@Html.DisplayFor(model => item.Delegation.DelegationType)</td>
                                    </tr>
                                    <tr>
                                        <td><b>@Html.DisplayNameFor(model => model.DepartureDate)</b></td>
                                        <td>@Html.DisplayFor(model => item.DepartureDate)</td>
                                    </tr>
                                    <tr>
                                        <td><b>@Html.DisplayNameFor(model => model.ReturnDate)</b></td>
                                        <td>@Html.DisplayFor(model => item.ReturnDate)</td>
                                    </tr>
                                    <tr>
                                        <td><b>@Html.DisplayNameFor(model => model.Description)</b></td>
                                        <td>@Html.DisplayFor(model => item.Description)</td>
                                    </tr>
                                    <tr>
                                        <td><b>@Html.DisplayNameFor(model => model.Status.StatusName)</b></td>
                                        <td>@Html.DisplayFor(model => item.Status.StatusName)</td>
                                    </tr>
                                    <tr>
                                        <td><b>@Html.DisplayNameFor(model => model.Motivation)</b></td>
                                        <td>@Html.DisplayFor(model => item.Motivation)</td>
                                    </tr>
                                    <tr>
                                        <td><b>@Html.DisplayNameFor(model => model.Approver)</b></td>
                                        <td>@Html.DisplayFor(model => item.Approver.FullName)</td>
                                    </tr>
                                </table>
                            </fieldset>
                        }
                        </div>
                </div> <!--your content end-->
            </div> <!--toPopup end-->

            <div class="loader"></div>
            <div id="backgroundPopup"></div>
        </td>
    </tr>
}

</table>

<div id="dialog-edit" style="display: none">
</div>
<div id="dialog-view" style="display: none">
</div>

